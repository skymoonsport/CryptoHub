<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CryptoHub - 5000+ Crypto</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{scroll-behavior:smooth;margin:0;padding:0;box-sizing:border-box}
:root{--bg1:#fff;--bg2:#f8fafd;--bg3:#eff2f5;--t1:#222531;--t2:#616e85;--bc:#eff2f5;--ac:#3861fb;--hv:#f0f6ff;--gn:#16c784;--rd:#ea3943;--sh:0 1px 2px rgba(0,0,0,.04),0 1px 3px rgba(0,0,0,.06)}
.dark{--bg1:#0d1421;--bg2:#171d2e;--bg3:#1e2738;--t1:#e8eaed;--t2:#8a919e;--bc:#1e2738;--ac:#5b7cfa;--hv:#1a2540;--sh:0 1px 3px rgba(0,0,0,.3)}
[dir=rtl] body{font-family:'Cairo','Inter',sans-serif}[dir=ltr] body{font-family:'Inter','Cairo',sans-serif}
body{background:var(--bg1);color:var(--t1);transition:background .3s,color .3s}
.gauge-w{position:relative;width:220px;height:110px;overflow:hidden}.gauge-bg{width:220px;height:220px;border-radius:50%;background:conic-gradient(from 180deg,#ef4444 0deg 36deg,#f97316 36deg 72deg,#fb923c 72deg 108deg,#eab308 108deg 144deg,#84cc16 144deg 180deg,#22c55e 180deg 216deg);transform:translateY(50%)}.gauge-in{position:absolute;width:170px;height:170px;background:var(--bg1);border-radius:50%;top:25px;left:25px;transition:background .5s,box-shadow .5s}
.gauge-in.ef{background:radial-gradient(circle,rgba(239,68,68,.2) 0%,var(--bg1) 70%);box-shadow:inset 0 0 40px rgba(239,68,68,.15)}.gauge-in.f{background:radial-gradient(circle,rgba(249,115,22,.2) 0%,var(--bg1) 70%);box-shadow:inset 0 0 40px rgba(249,115,22,.15)}.gauge-in.ne{background:radial-gradient(circle,rgba(234,179,8,.2) 0%,var(--bg1) 70%);box-shadow:inset 0 0 40px rgba(234,179,8,.15)}.gauge-in.gr{background:radial-gradient(circle,rgba(132,204,22,.2) 0%,var(--bg1) 70%);box-shadow:inset 0 0 40px rgba(132,204,22,.15)}.gauge-in.eg{background:radial-gradient(circle,rgba(34,197,94,.2) 0%,var(--bg1) 70%);box-shadow:inset 0 0 40px rgba(34,197,94,.15)}
.gauge-nd{position:absolute;width:3px;height:90px;background:var(--t1);bottom:0;left:50%;transform-origin:bottom center;transition:transform 1s ease-out;border-radius:2px;z-index:2}.gauge-nd::after{content:'';position:absolute;top:-2px;left:-4px;width:11px;height:11px;background:var(--t1);border-radius:50%}
.pcard{background:linear-gradient(135deg,#3861fb,#6c5ce7);border-radius:16px;padding:20px;color:#fff;position:relative;overflow:hidden}.pcard::before{content:'';position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.06) 0%,transparent 70%);animation:pul 3s infinite}@keyframes pul{0%,100%{transform:scale(1);opacity:.5}50%{transform:scale(1.1);opacity:.8}}
.card{background:var(--bg1);border:1px solid var(--bc);border-radius:12px;padding:16px;transition:all .2s;box-shadow:var(--sh)}.card:hover{box-shadow:0 4px 14px rgba(0,0,0,.08)}.dark .card:hover{box-shadow:0 4px 14px rgba(0,0,0,.3)}
.sb{display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:6px;font-size:11px;font-weight:700}.sbb{background:rgba(22,199,132,.12);color:#16c784}.sbs{background:rgba(234,57,67,.12);color:#ea3943}.sbn{background:var(--bg3);color:var(--t2)}
.ct{width:100%;background:var(--bg1);border-radius:12px;overflow:hidden;border:1px solid var(--bc);box-shadow:var(--sh)}.ct th{background:var(--bg2);padding:12px 10px;text-align:center;font-weight:600;font-size:11px;color:var(--t2);border-bottom:1px solid var(--bc);position:sticky;top:0;z-index:10;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.ct td{padding:12px 8px;text-align:center;border-bottom:1px solid var(--bc);font-size:13px}.ct tbody tr{transition:background .15s;cursor:pointer}.ct tbody tr:hover{background:var(--hv)}.sortable{cursor:pointer;user-select:none}.sortable:hover{color:var(--ac)}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:9999;backdrop-filter:blur(6px)}.modal.active{display:flex;align-items:center;justify-content:center}.mc{background:var(--bg1);border-radius:16px;max-width:95%;max-height:90vh;overflow:auto;box-shadow:0 25px 60px rgba(0,0,0,.3)}
.ec{background:var(--bg2);border:1px solid var(--bc);border-radius:12px;padding:14px;display:flex;align-items:center;gap:14px;transition:all .2s}.ec:hover{border-color:var(--ac);transform:translateY(-1px)}.el{width:40px;height:40px;border-radius:50%;object-fit:contain;background:#fff;padding:3px}.ebtn{display:inline-flex;align-items:center;gap:5px;margin-top:5px;padding:5px 12px;background:var(--ac);color:#fff;border-radius:7px;font-size:11px;font-weight:600;text-decoration:none;transition:all .2s}.ebtn:hover{transform:translateY(-1px);filter:brightness(1.1)}.ebtn .fa-gift{animation:gp 2s infinite}@keyframes gp{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
.dropdown{position:relative;display:inline-block}.ddb{padding:7px 12px;border-radius:8px;cursor:pointer;transition:all .2s;border:1px solid var(--bc);background:var(--bg1);font-size:13px;display:flex;align-items:center;gap:7px;user-select:none;color:var(--t1)}.ddb:hover{border-color:var(--ac);background:var(--hv)}.ddm{position:absolute;top:calc(100% + 5px);right:0;background:var(--bg1);border:1px solid var(--bc);border-radius:12px;min-width:200px;max-height:420px;overflow-y:auto;box-shadow:0 12px 40px rgba(0,0,0,.12);z-index:1000;display:none}[dir=ltr] .ddm{right:auto;left:0}.dark .ddm{box-shadow:0 12px 40px rgba(0,0,0,.5)}.ddm.active{display:block;animation:ds .2s ease-out}@keyframes ds{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.ddm::-webkit-scrollbar{width:5px}.ddm::-webkit-scrollbar-thumb{background:var(--bc);border-radius:3px}.ddi{padding:9px 14px;cursor:pointer;transition:background .15s;display:flex;align-items:center;gap:9px;font-size:13px;color:var(--t1)}.ddi:hover{background:var(--hv)}.ddi.active{background:rgba(56,97,251,.08);color:var(--ac);font-weight:600}.ddi .flag{font-size:18px}.ddi .ck{margin-inline-start:auto;color:var(--ac);display:none;font-size:11px}.ddi.active .ck{display:block}.ddl{text-decoration:none;color:inherit;display:flex;align-items:center;gap:9px;padding:9px 14px;transition:background .15s}.ddl:hover{background:linear-gradient(135deg,rgba(56,97,251,.06),rgba(108,92,231,.06))}.ddl .fa-gift{color:var(--gn)!important;animation:gp 2s infinite}
.spinner{display:inline-block;width:20px;height:20px;border:3px solid rgba(56,97,251,.2);border-radius:50%;border-top-color:var(--ac);animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.ld{display:inline-block;width:7px;height:7px;background:var(--gn);border-radius:50%;animation:blink 2s infinite}@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}
.pb{width:100%;height:3px;background:var(--bg3);border-radius:2px;overflow:hidden;margin-top:8px}.pf{height:100%;background:linear-gradient(90deg,var(--ac),#6c5ce7);transition:width .3s}.ib{display:inline-flex;align-items:center;gap:3px;padding:3px 8px;border-radius:10px;font-size:10px;font-weight:600;background:var(--bg3);color:var(--t2)}
::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--bg2)}::-webkit-scrollbar-thumb{background:var(--bc);border-radius:3px}
.tscroll{display:flex;gap:12px;overflow-x:auto;padding-bottom:8px;scroll-snap-type:x mandatory}.tscroll::-webkit-scrollbar{height:4px}.tcard{min-width:175px;scroll-snap-align:start;background:var(--bg1);border:1px solid var(--bc);border-radius:12px;padding:14px;transition:all .2s;cursor:pointer;flex-shrink:0}.tcard:hover{border-color:var(--ac);transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.08)}.dark .tcard:hover{box-shadow:0 6px 16px rgba(0,0,0,.3)}.trank{width:24px;height:24px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:800}
.aic{background:var(--bg1);border:1px solid var(--bc);border-radius:12px;padding:14px;transition:all .2s;position:relative;overflow:hidden}.aic::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;border-radius:12px 12px 0 0}.aic.buy::before{background:var(--gn)}.aic.sell::before{background:var(--rd)}.aic.hold::before{background:#eab308}.aic:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.08)}
.fgb{height:6px;border-radius:3px;transition:width .8s ease}
.altg{width:100%;height:12px;border-radius:6px;background:linear-gradient(90deg,#3861fb 0%,#6c5ce7 25%,#eab308 50%,#f97316 75%,#ea3943 100%);position:relative;overflow:visible}.altp{position:absolute;top:-4px;width:20px;height:20px;background:#fff;border:3px solid var(--ac);border-radius:50%;transform:translateX(-50%);transition:left 1s ease;box-shadow:0 2px 8px rgba(0,0,0,.2)}
footer{background:var(--bg2);border-top:1px solid var(--bc);margin-top:40px}footer a{color:var(--ac);text-decoration:none;transition:opacity .2s}footer a:hover{opacity:.8}
@media(max-width:640px){.ddm{position:fixed;top:auto;bottom:0;left:0;right:0;border-radius:16px 16px 0 0;max-height:70vh;min-width:100%}}
</style>
</head>
<body>
<!-- Nav -->
<nav class="fixed w-full top-0 z-50 border-b" style="background:var(--bg1);border-color:var(--bc)">
<div class="max-w-7xl mx-auto px-4 py-2.5"><div class="flex justify-between items-center">
<div class="flex items-center gap-2.5">
<div class="flex items-center gap-2"><i class="fas fa-coins text-xl" style="color:var(--ac)"></i><h1 class="text-base font-bold" data-i18n="siteTitle">ÙƒØ±ÙŠØ¨ØªÙˆ Ù‡Ø¨</h1></div>
<div class="dropdown" id="exDd"><button class="ddb" onclick="toggleDD('exDd')"><i class="fas fa-exchange-alt" style="color:var(--ac);font-size:12px"></i><span data-i18n="exchanges" class="hidden sm:inline">Ø§Ù„Ù…Ù†ØµØ§Øª</span><i class="fas fa-chevron-down" style="font-size:9px"></i></button>
<div class="ddm" style="min-width:220px"><div style="padding:8px 14px;background:linear-gradient(135deg,#3861fb,#6c5ce7);color:#fff;font-weight:600;font-size:11px;text-align:center;border-radius:12px 12px 0 0;margin:-1px -1px 0 -1px"><i class="fas fa-gift"></i> <span data-i18n="recommendedExchanges">Ù…Ù†ØµØ§Øª Ø§Ù„ØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§</span></div>
<a href="https://accounts.binance.info/register?ref=OWIOMYX9" target="_blank" class="ddl"><span class="flag">ğŸŸ¡</span><span>Binance</span><i class="fas fa-gift"></i></a>
<a href="https://bingx.com/invite/MTBGIP" target="_blank" class="ddl"><span class="flag">ğŸ”µ</span><span>BingX</span><i class="fas fa-gift"></i></a>
<a href="https://www.mexc.com/register?inviteCode=1FTLJ" target="_blank" class="ddl"><span class="flag">ğŸŸ¢</span><span>MEXC</span><i class="fas fa-gift"></i></a>
<a href="https://www.bybit.com/invite?ref=EKDMEJ" target="_blank" class="ddl"><span class="flag">ğŸŸ </span><span>Bybit</span><i class="fas fa-gift"></i></a>
<a href="https://partner.bitget.com/bg/NZLRR8" target="_blank" class="ddl"><span class="flag">ğŸ”µ</span><span>Bitget</span><i class="fas fa-gift"></i></a></div></div>
<span class="flex items-center gap-1.5 text-xs px-2 py-1 rounded-full" style="background:rgba(22,199,132,.1);color:var(--gn)"><span class="ld"></span><span data-i18n="live" class="hidden sm:inline">Ù…Ø¨Ø§Ø´Ø±</span></span>
</div>
<div class="flex items-center gap-2">
<div class="dropdown" id="langDd"><button class="ddb" onclick="toggleDD('langDd')"><span id="cFlag">ğŸ‡¸ğŸ‡¦</span><span id="cCode" class="text-xs font-bold">AR</span><i class="fas fa-chevron-down" style="font-size:9px"></i></button><div class="ddm" id="lMenu" style="min-width:190px"></div></div>
<button onclick="toggleTheme()" class="ddb" style="padding:7px 9px"><i class="fas fa-sun text-yellow-500" id="sI"></i><i class="fas fa-moon hidden" style="color:var(--ac)" id="mI"></i></button>
</div></div></div></nav>

<main class="pt-16 max-w-7xl mx-auto px-4 py-5">
<!-- ğŸ”¥ Trending -->
<div class="mb-5"><div class="flex items-center justify-between mb-3"><h3 class="font-bold text-base flex items-center gap-2">ğŸ”¥ <span data-i18n="trendingTitle">Ø§Ù„Ø£ÙƒØ«Ø± Ø±ÙˆØ§Ø¬Ø§Ù‹</span></h3><span class="text-xs" style="color:var(--t2)" data-i18n="trendingSub">Ø£ÙƒØ«Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø¨Ø­Ø«Ø§Ù‹ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©</span></div><div class="tscroll" id="tList"><div class="text-center py-4 w-full"><div class="spinner mx-auto"></div></div></div></div>

<!-- Fear & Greed Enhanced + Altcoin Index -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-5">
<div class="card md:col-span-2"><div class="flex items-start justify-between mb-3"><div><h3 class="font-bold text-base mb-0.5" data-i18n="fearGreedTitle">Ù…Ø¤Ø´Ø± Ø§Ù„Ø®ÙˆÙ ÙˆØ§Ù„Ø·Ù…Ø¹</h3><p class="text-xs" style="color:var(--t2)" data-i18n="fearGreedSub">Ù…Ø¤Ø´Ø± Ù…Ø¹Ù†ÙˆÙŠØ§Øª Ø§Ù„Ø³ÙˆÙ‚</p></div><span class="flex items-center gap-1.5 text-xs px-2 py-1 rounded" style="background:var(--bg3)"><span class="ld"></span><span data-i18n="live">Ù…Ø¨Ø§Ø´Ø±</span></span></div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div class="flex flex-col items-center"><div class="gauge-w"><div class="gauge-bg"></div><div class="gauge-in" id="gIn"></div><div class="gauge-nd" id="gNd"></div></div><div class="text-center mt-2"><div class="text-3xl font-bold" id="fgV">--</div><div class="text-sm font-semibold" id="fgL">--</div><div class="text-xs mt-1" style="color:var(--t2)" data-i18n="outOf100">Ù…Ù† 100</div></div></div>
<div><div class="text-xs font-semibold mb-2" style="color:var(--t2)" data-i18n="fgHistory">Ø§Ù„ØªØ§Ø±ÙŠØ®</div><div class="space-y-2" id="fgH">
<div class="flex items-center gap-2 text-xs"><span style="width:50px;color:var(--t2)" data-i18n="now">Ø§Ù„Ø¢Ù†</span><div class="flex-1 rounded-full" style="background:var(--bg3);height:8px;overflow:hidden"><div class="fgb" id="fN" style="width:0%"></div></div><span id="fNv" class="font-bold" style="width:25px">--</span></div>
<div class="flex items-center gap-2 text-xs"><span style="width:50px;color:var(--t2)" data-i18n="yesterday">Ø£Ù…Ø³</span><div class="flex-1 rounded-full" style="background:var(--bg3);height:8px;overflow:hidden"><div class="fgb" id="fY" style="width:0%"></div></div><span id="fYv" class="font-bold" style="width:25px">--</span></div>
<div class="flex items-center gap-2 text-xs"><span style="width:50px;color:var(--t2)" data-i18n="lastWeek">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</span><div class="flex-1 rounded-full" style="background:var(--bg3);height:8px;overflow:hidden"><div class="fgb" id="fW" style="width:0%"></div></div><span id="fWv" class="font-bold" style="width:25px">--</span></div>
<div class="flex items-center gap-2 text-xs"><span style="width:50px;color:var(--t2)" data-i18n="lastMonth">Ø§Ù„Ø´Ù‡Ø±</span><div class="flex-1 rounded-full" style="background:var(--bg3);height:8px;overflow:hidden"><div class="fgb" id="fM" style="width:0%"></div></div><span id="fMv" class="font-bold" style="width:25px">--</span></div></div>
<div class="mt-3 pt-2 border-t" style="border-color:var(--bc)"><div class="grid grid-cols-5 gap-1 text-center" style="font-size:9px"><div><div class="w-full h-1.5 bg-red-500 rounded mb-0.5"></div><span data-i18n="extremeFear">Ø®ÙˆÙ Ø´Ø¯ÙŠØ¯</span></div><div><div class="w-full h-1.5 bg-orange-500 rounded mb-0.5"></div><span data-i18n="fear">Ø®ÙˆÙ</span></div><div><div class="w-full h-1.5 bg-yellow-500 rounded mb-0.5"></div><span data-i18n="neutral">Ù…Ø­Ø§ÙŠØ¯</span></div><div><div class="w-full h-1.5 bg-lime-500 rounded mb-0.5"></div><span data-i18n="greed">Ø·Ù…Ø¹</span></div><div><div class="w-full h-1.5 bg-green-500 rounded mb-0.5"></div><span data-i18n="extremeGreed">Ø·Ù…Ø¹ Ø´Ø¯ÙŠØ¯</span></div></div></div></div></div></div>

<!-- Altcoin Index -->
<div class="card"><div class="flex items-center justify-between mb-2"><h3 class="font-bold text-sm" data-i18n="altcoinIndex">Ù…Ø¤Ø´Ø± Ù…ÙˆØ³Ù… Ø§Ù„Ø£Ù„ØªÙƒÙˆÙŠÙ†</h3><span class="text-xs px-2 py-0.5 rounded" style="background:var(--bg3);color:var(--t2)">CMC</span></div>
<div class="text-center my-3"><div class="text-4xl font-bold" id="altV">--</div><div class="text-sm font-semibold mt-1" id="altL" style="color:var(--ac)">--</div></div>
<div class="altg mb-3"><div class="altp" id="altP" style="left:50%"></div></div>
<div class="flex justify-between text-xs" style="color:var(--t2)"><span>Bitcoin</span><span data-i18n="altcoinSeason">Ù…ÙˆØ³Ù… Ø£Ù„ØªÙƒÙˆÙŠÙ†</span></div>
<div class="mt-3 pt-2 border-t space-y-1.5" style="border-color:var(--bc)">
<div class="flex justify-between text-xs"><span style="color:var(--t2)" data-i18n="btcDominance">Ù‡ÙŠÙ…Ù†Ø© BTC</span><span class="font-bold" id="btcD">--</span></div>
<div class="flex justify-between text-xs"><span style="color:var(--t2)" data-i18n="ethDominance">Ù‡ÙŠÙ…Ù†Ø© ETH</span><span class="font-bold" id="ethD">--</span></div>
<div class="flex justify-between text-xs"><span style="color:var(--t2)" data-i18n="totalMarketCap">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ÙƒÙ„ÙŠØ©</span><span class="font-bold" id="tMcap">--</span></div>
<div class="flex justify-between text-xs"><span style="color:var(--t2)" data-i18n="totalVolume24">Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙƒÙ„ÙŠ 24Ø³</span><span class="font-bold" id="tVol">--</span></div></div></div></div>

<!-- AI Prediction + 8 Indicators -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-5">
<div class="pcard"><div class="relative z-10"><div class="flex items-start justify-between mb-3"><div><h3 class="font-bold text-base mb-0.5">ğŸ¤– <span data-i18n="aiTitle">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</span></h3><p class="text-xs opacity-80" data-i18n="aiSub">ØªÙ†Ø¨Ø¤Ø§Øª Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p></div><span class="flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-white/20"><span class="ld"></span><span data-i18n="live">Ù…Ø¨Ø§Ø´Ø±</span></span></div>
<div class="text-center mb-3"><div class="text-5xl font-bold mb-1" id="aiS">--</div><div class="sb" id="aiSig" style="background:rgba(255,255,255,.2);color:#fff"><span data-i18n="analyzing">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...</span></div></div>
<div class="grid grid-cols-2 gap-2 text-sm"><div class="bg-white/10 rounded-lg p-2.5"><div class="opacity-75 text-xs mb-0.5" data-i18n="bullishSignals">ØµØ¹ÙˆØ¯</div><div class="font-bold text-lg" id="buC">0</div></div><div class="bg-white/10 rounded-lg p-2.5"><div class="opacity-75 text-xs mb-0.5" data-i18n="bearishSignals">Ù‡Ø¨ÙˆØ·</div><div class="font-bold text-lg" id="beC">0</div></div></div>
<div class="mt-3 pt-2 border-t border-white/20"><div class="text-xs opacity-70 mb-1" data-i18n="aiRecommendation">Ø§Ù„ØªÙˆØµÙŠØ©</div><div class="text-sm font-bold" id="aiRec">--</div></div></div></div>

<div class="lg:col-span-2"><div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
<div class="aic hold" id="rC"><div class="flex items-center justify-between mb-1"><h4 class="font-bold text-xs">RSI (14)</h4><i class="fas fa-chart-line" style="color:var(--ac);font-size:11px"></i></div><div class="text-xl font-bold mb-1" id="rV">--</div><div class="sb sbn" id="rS">...</div></div>
<div class="aic hold" id="mC"><div class="flex items-center justify-between mb-1"><h4 class="font-bold text-xs">MACD</h4><i class="fas fa-wave-square text-purple-500" style="font-size:11px"></i></div><div class="text-xl font-bold mb-1" id="mV">--</div><div class="sb sbn" id="mS">...</div></div>
<div class="aic hold" id="bC"><div class="flex items-center justify-between mb-1"><h4 class="font-bold text-xs" data-i18n="bollingerBands">Ø¨ÙˆÙ„ÙŠÙ†Ø¬Ø±</h4><i class="fas fa-chart-area" style="color:var(--gn);font-size:11px"></i></div><div class="text-xl font-bold mb-1" id="bV">--</div><div class="sb sbn" id="bS">...</div></div>
<div class="aic hold" id="eC"><div class="flex items-center justify-between mb-1"><h4 class="font-bold text-xs">EMA 20/50</h4><i class="fas fa-chart-line text-orange-500" style="font-size:11px"></i></div><div class="text-xl font-bold mb-1" id="eV">--</div><div class="sb sbn" id="eS">...</div></div>
<div class="aic hold" id="stC"><div class="flex items-center justify-between mb-1"><h4 class="font-bold text-xs">Stochastic</h4><i class="fas fa-percentage" style="color:#f97316;font-size:11px"></i></div><div class="text-xl font-bold mb-1" id="stV">--</div><div class="sb sbn" id="stS">...</div></div>
<div class="aic hold" id="adC"><div class="flex items-center justify-between mb-1"><h4 class="font-bold text-xs">ADX</h4><i class="fas fa-bolt" style="color:#eab308;font-size:11px"></i></div><div class="text-xl font-bold mb-1" id="adV">--</div><div class="sb sbn" id="adS">...</div></div>
<div class="aic hold" id="vlC"><div class="flex items-center justify-between mb-1"><h4 class="font-bold text-xs" data-i18n="volAnalysis">Ø­Ø¬Ù… Ø§Ù„ØªØ¯Ø§ÙˆÙ„</h4><i class="fas fa-chart-bar" style="color:#8b5cf6;font-size:11px"></i></div><div class="text-xl font-bold mb-1" id="vlV">--</div><div class="sb sbn" id="vlS">...</div></div>
<div class="aic hold" id="srC"><div class="flex items-center justify-between mb-1"><h4 class="font-bold text-xs" data-i18n="supportResistance">Ø¯Ø¹Ù…/Ù…Ù‚Ø§ÙˆÙ…Ø©</h4><i class="fas fa-arrows-alt-v" style="color:var(--rd);font-size:11px"></i></div><div class="text-xs font-bold mb-1" id="srV">--</div><div class="sb sbn" id="srS">...</div></div>
</div></div></div>

<!-- ğŸ¯ Entry/Exit Panel -->
<div class="card mb-5" id="aiEE"><h3 class="font-bold text-base mb-3 flex items-center gap-2">ğŸ¯ <span data-i18n="entryExitTitle">Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ - Bitcoin</span></h3>
<div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
<div class="rounded-xl p-4 text-center" style="background:rgba(22,199,132,.08);border:1px solid rgba(22,199,132,.2)"><div class="text-xs font-semibold mb-1" style="color:var(--gn)" data-i18n="entryZone">Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„</div><div class="text-lg font-bold" style="color:var(--gn)" id="enP">--</div><div class="text-xs mt-1" style="color:var(--t2)" data-i18n="entryNote">Ø¹Ù†Ø¯ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¯Ø¹Ù…</div></div>
<div class="rounded-xl p-4 text-center" style="background:rgba(56,97,251,.08);border:1px solid rgba(56,97,251,.2)"><div class="text-xs font-semibold mb-1" style="color:var(--ac)" data-i18n="currentPrice">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ</div><div class="text-lg font-bold" style="color:var(--ac)" id="crP">--</div><div class="text-xs mt-1" id="pAct" style="color:var(--t2)">--</div></div>
<div class="rounded-xl p-4 text-center" style="background:rgba(234,57,67,.08);border:1px solid rgba(234,57,67,.2)"><div class="text-xs font-semibold mb-1" style="color:var(--rd)" data-i18n="exitZone">Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø±ÙˆØ¬</div><div class="text-lg font-bold" style="color:var(--rd)" id="exP">--</div><div class="text-xs mt-1" style="color:var(--t2)" data-i18n="exitNote">Ø¹Ù†Ø¯ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø©</div></div></div>
<div class="mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2 text-center">
<div class="rounded-lg p-2" style="background:var(--bg3)"><div class="text-xs" style="color:var(--t2)" data-i18n="stopLoss">ÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø©</div><div class="text-sm font-bold" style="color:var(--rd)" id="sL">--</div></div>
<div class="rounded-lg p-2" style="background:var(--bg3)"><div class="text-xs" style="color:var(--t2)" data-i18n="takeProfit">Ø¬Ù†ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</div><div class="text-sm font-bold" style="color:var(--gn)" id="tP">--</div></div>
<div class="rounded-lg p-2" style="background:var(--bg3)"><div class="text-xs" style="color:var(--t2)" data-i18n="riskReward">Ù…Ø®Ø§Ø·Ø±Ø©/Ù…ÙƒØ§ÙØ£Ø©</div><div class="text-sm font-bold" id="rR">--</div></div>
<div class="rounded-lg p-2" style="background:var(--bg3)"><div class="text-xs" style="color:var(--t2)" data-i18n="trendStrength">Ù‚ÙˆØ© Ø§Ù„Ø§ØªØ¬Ø§Ù‡</div><div class="text-sm font-bold" id="tS">--</div></div></div></div>

<!-- Filters -->
<div class="card mb-4"><div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-6 gap-3">
<div><label class="block text-xs font-medium mb-1" style="color:var(--t2)" data-i18n="searchCoin">Ø§Ù„Ø¨Ø­Ø«</label><input type="text" id="search" placeholder="BTC, ETH..." class="w-full p-2 text-sm rounded-lg" style="background:var(--bg2);border:1px solid var(--bc);color:var(--t1);outline:none" onfocus="this.style.borderColor='var(--ac)'" onblur="this.style.borderColor='var(--bc)'"></div>
<div><label class="block text-xs font-medium mb-1" style="color:var(--t2)" data-i18n="sortBy">Ø§Ù„ØªØ±ØªÙŠØ¨</label><select id="sortSel" class="w-full p-2 text-sm rounded-lg" style="background:var(--bg2);border:1px solid var(--bc);color:var(--t1)"><option value="rank" data-i18n-opt="rank">Ø§Ù„ØªØ±ØªÙŠØ¨</option><option value="market_cap" data-i18n-opt="marketCap">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©</option><option value="price" data-i18n-opt="price">Ø§Ù„Ø³Ø¹Ø±</option><option value="change_24h" data-i18n-opt="change24h">ØªØºÙŠØ± 24Ø³</option><option value="volume" data-i18n-opt="volume">Ø§Ù„Ø­Ø¬Ù…</option></select></div>
<div><label class="block text-xs font-medium mb-1" style="color:var(--t2)" data-i18n="network">Ø§Ù„Ø´Ø¨ÙƒØ©</label><select id="netSel" class="w-full p-2 text-sm rounded-lg" style="background:var(--bg2);border:1px solid var(--bc);color:var(--t1)"></select></div>
<div><label class="block text-xs font-medium mb-1" style="color:var(--t2)" data-i18n="show">Ø§Ù„Ø¹Ø±Ø¶</label><select id="ppSel" class="w-full p-2 text-sm rounded-lg" style="background:var(--bg2);border:1px solid var(--bc);color:var(--t1)"><option value="50">50</option><option value="100" selected>100</option><option value="250">250</option></select></div>
<div class="sm:col-span-2 flex items-end"><button onclick="loadMore()" id="lmBtn" class="w-full p-2 text-sm rounded-lg font-semibold text-white" style="background:var(--ac)"><i class="fas fa-plus-circle"></i> <span data-i18n="loadMore">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯</span></button></div>
</div><div id="lProg" class="hidden"><div class="pb"><div class="pf" id="pFill" style="width:0%"></div></div><div class="text-xs text-center mt-1" style="color:var(--t2)" id="pTxt">...</div></div></div>

<div id="aFilt" class="hidden mb-3 flex items-center gap-2 flex-wrap"><span class="text-sm" style="color:var(--t2)" data-i18n="filteredBy">ØªØµÙÙŠØ©:</span><span id="aNetTag" class="inline-flex items-center gap-2 px-3 py-1 rounded-lg text-sm font-medium" style="background:rgba(56,97,251,.1);color:var(--ac)"><span id="aNetName"></span><button onclick="clearNet()" class="hover:opacity-70">&times;</button></span><span id="fCount" class="text-sm" style="color:var(--t2)"></span></div>

<!-- Table -->
<div class="ct mb-4"><table class="w-full"><thead><tr>
<th class="sortable" onclick="doSort('rank')">#</th>
<th class="sortable text-start" onclick="doSort('name')" data-i18n="colName">Ø§Ù„Ø§Ø³Ù…</th>
<th class="sortable" onclick="doSort('price')" data-i18n="colPrice">Ø§Ù„Ø³Ø¹Ø±</th>
<th class="sortable" onclick="doSort('change_1h')">1h%</th>
<th class="sortable" onclick="doSort('change_24h')">24h%</th>
<th class="sortable hidden md:table-cell" onclick="doSort('change_7d')">7d%</th>
<th class="sortable hidden lg:table-cell" onclick="doSort('market_cap')" data-i18n="colMarketCap">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©</th>
<th class="sortable hidden lg:table-cell" onclick="doSort('volume')" data-i18n="colVolume">Ø§Ù„Ø­Ø¬Ù… 24Ø³</th>
<th class="hidden xl:table-cell" data-i18n="colExchanges">Ø§Ù„Ù…Ù†ØµØ§Øª</th>
</tr></thead><tbody id="tBody"><tr><td colspan="9" class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><div data-i18n="loadingData">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div></td></tr></tbody></table></div>

<!-- Pagination -->
<div class="flex justify-center gap-1.5 flex-wrap items-center">
<button onclick="gFirst()" class="px-3 py-1.5 rounded-lg text-xs" style="background:var(--bg2);color:var(--t1)"><i class="fas fa-angle-double-left"></i></button>
<button onclick="gPrev()" class="px-3 py-1.5 rounded-lg text-xs" style="background:var(--bg2);color:var(--t1)" data-i18n="prev">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
<div id="pgs" class="flex gap-1"></div>
<button onclick="gNext()" class="px-3 py-1.5 rounded-lg text-xs" style="background:var(--bg2);color:var(--t1)" data-i18n="next">Ø§Ù„ØªØ§Ù„ÙŠ</button>
<button onclick="gLast()" class="px-3 py-1.5 rounded-lg text-xs" style="background:var(--bg2);color:var(--t1)"><i class="fas fa-angle-double-right"></i></button></div>
<div class="text-center mt-2 text-xs" style="color:var(--t2)"><span data-i18n="showing">Ø¹Ø±Ø¶</span> <span id="sRange">--</span> <span data-i18n="of">Ù…Ù†</span> <span id="tCoins">--</span> <span data-i18n="coins">Ø¹Ù…Ù„Ø©</span></div>
</main>

<!-- Footer -->
<footer><div class="max-w-7xl mx-auto px-4 py-10">
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
<div><div class="flex items-center gap-2 mb-3"><i class="fas fa-coins text-xl" style="color:var(--ac)"></i><span class="font-bold text-lg" data-i18n="siteTitle">ÙƒØ±ÙŠØ¨ØªÙˆ Ù‡Ø¨</span></div><p class="text-sm leading-relaxed" style="color:var(--t2)" data-i18n="footerDesc">Ù…Ù†ØµØªÙƒ Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„ØªØªØ¨Ø¹ Ø£ÙƒØ«Ø± Ù…Ù† 5000 Ø¹Ù…Ù„Ø© Ø±Ù‚Ù…ÙŠØ© Ù…Ø¹ Ø£Ø¯ÙˆØ§Øª ØªØ­Ù„ÙŠÙ„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù…Ø©.</p></div>
<div><h4 class="font-bold text-sm mb-3" data-i18n="quickLinks">Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h4><div class="space-y-2 text-sm" style="color:var(--t2)"><div><a href="#" onclick="scrollTo(0,0);return false" data-i18n="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></div><div><a href="#" onclick="document.getElementById('tList').scrollIntoView({behavior:'smooth'});return false" data-i18n="trendingTitle">Ø§Ù„Ø£ÙƒØ«Ø± Ø±ÙˆØ§Ø¬Ø§Ù‹</a></div><div><a href="#" onclick="document.getElementById('aiEE').scrollIntoView({behavior:'smooth'});return false" data-i18n="entryExitTitle">Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬</a></div></div></div>
<div><h4 class="font-bold text-sm mb-3" data-i18n="topExchanges">Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØµØ§Øª</h4><div class="space-y-2 text-sm"><div><a href="https://accounts.binance.info/register?ref=OWIOMYX9" target="_blank">ğŸŸ¡ Binance <i class="fas fa-gift" style="color:var(--gn);font-size:10px"></i></a></div><div><a href="https://bingx.com/invite/MTBGIP" target="_blank">ğŸ”µ BingX <i class="fas fa-gift" style="color:var(--gn);font-size:10px"></i></a></div><div><a href="https://www.mexc.com/register?inviteCode=1FTLJ" target="_blank">ğŸŸ¢ MEXC <i class="fas fa-gift" style="color:var(--gn);font-size:10px"></i></a></div><div><a href="https://www.bybit.com/invite?ref=EKDMEJ" target="_blank">ğŸŸ  Bybit <i class="fas fa-gift" style="color:var(--gn);font-size:10px"></i></a></div><div><a href="https://partner.bitget.com/bg/NZLRR8" target="_blank">ğŸ”µ Bitget <i class="fas fa-gift" style="color:var(--gn);font-size:10px"></i></a></div></div></div>
<div><h4 class="font-bold text-sm mb-3" data-i18n="disclaimer">Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©</h4><p class="text-xs leading-relaxed" style="color:var(--t2)" data-i18n="disclaimerText">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø· ÙˆÙ„ÙŠØ³Øª Ù†ØµÙŠØ­Ø© Ù…Ø§Ù„ÙŠØ©. ØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙŠÙ†Ø·ÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø®Ø§Ø·Ø± Ø¹Ø§Ù„ÙŠØ©.</p></div></div>
<div class="border-t pt-6 flex flex-col sm:flex-row justify-between items-center gap-3" style="border-color:var(--bc)">
<div class="text-xs" style="color:var(--t2)">Â© 2025 CryptoHub. <span data-i18n="allRights">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</span></div>
<div class="flex items-center gap-4 text-sm" style="color:var(--t2)"><span class="flex items-center gap-1"><i class="fas fa-globe" style="font-size:11px"></i> 30 <span data-i18n="coins">Ù„ØºØ©</span></span><span class="flex items-center gap-1"><i class="fas fa-link" style="font-size:11px"></i> 30 <span data-i18n="network">Ø´Ø¨ÙƒØ©</span></span><span class="flex items-center gap-1"><i class="fas fa-coins" style="font-size:11px"></i> 5000+</span></div></div></div></footer>

<!-- Modal -->
<div id="exMod" class="modal"><div class="mc p-5" style="width:92%;max-width:1000px">
<div class="flex justify-between items-center mb-4"><div class="flex items-center gap-3"><img id="mLogo" src="" alt="" class="w-9 h-9 rounded-full"><div><div class="text-lg font-bold" id="mName">--</div><div class="text-xs" style="color:var(--t2)"><span id="mSym">--</span> Â· <span data-i18n="availableOn">Ù…ØªÙˆÙØ± Ø¹Ù„Ù‰</span> <span id="exCt" class="font-semibold">--</span> <span data-i18n="exchange">Ù…Ù†ØµØ©</span></div></div></div><button onclick="closeMod()" class="text-2xl leading-none hover:text-red-500 transition">&times;</button></div>
<input type="text" id="exSrch" class="w-full p-2.5 text-sm rounded-lg mb-3" style="background:var(--bg2);border:1px solid var(--bc);color:var(--t1);outline:none">
<div class="mb-3 p-2.5 rounded-lg text-xs" style="background:rgba(56,97,251,.06);border:1px solid rgba(56,97,251,.15);color:var(--ac)"><i class="fas fa-info-circle"></i> <span data-i18n="referralNote">ğŸ Ø±ÙˆØ§Ø¨Ø· Ø¥Ø­Ø§Ù„Ø© Ø®Ø§ØµØ©</span></div>
<div id="exLst" style="max-height:440px;overflow-y:auto"><div class="text-center py-6"><div class="spinner mx-auto mb-2"></div></div></div></div></div>

<script>
const LANGS=[{c:'ar',f:'ğŸ‡¸ğŸ‡¦',l:'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',d:'rtl'},{c:'en',f:'ğŸ‡¬ğŸ‡§',l:'English',d:'ltr'},{c:'es',f:'ğŸ‡ªğŸ‡¸',l:'EspaÃ±ol',d:'ltr'},{c:'pt',f:'ğŸ‡µğŸ‡¹',l:'PortuguÃªs',d:'ltr'},{c:'fr',f:'ğŸ‡«ğŸ‡·',l:'FranÃ§ais',d:'ltr'},{c:'de',f:'ğŸ‡©ğŸ‡ª',l:'Deutsch',d:'ltr'},{c:'it',f:'ğŸ‡®ğŸ‡¹',l:'Italiano',d:'ltr'},{c:'ru',f:'ğŸ‡·ğŸ‡º',l:'Ğ ÑƒÑÑĞºĞ¸Ğ¹',d:'ltr'},{c:'tr',f:'ğŸ‡¹ğŸ‡·',l:'TÃ¼rkÃ§e',d:'ltr'},{c:'zh',f:'ğŸ‡¨ğŸ‡³',l:'ä¸­æ–‡',d:'ltr'},{c:'ja',f:'ğŸ‡¯ğŸ‡µ',l:'æ—¥æœ¬èª',d:'ltr'},{c:'ko',f:'ğŸ‡°ğŸ‡·',l:'í•œêµ­ì–´',d:'ltr'},{c:'hi',f:'ğŸ‡®ğŸ‡³',l:'à¤¹à¤¿à¤¨à¥à¤¦à¥€',d:'ltr'},{c:'nl',f:'ğŸ‡³ğŸ‡±',l:'Nederlands',d:'ltr'},{c:'pl',f:'ğŸ‡µğŸ‡±',l:'Polski',d:'ltr'},{c:'th',f:'ğŸ‡¹ğŸ‡­',l:'à¹„à¸—à¸¢',d:'ltr'},{c:'vi',f:'ğŸ‡»ğŸ‡³',l:'Tiáº¿ng Viá»‡t',d:'ltr'},{c:'id',f:'ğŸ‡®ğŸ‡©',l:'Bahasa Indonesia',d:'ltr'},{c:'uk',f:'ğŸ‡ºğŸ‡¦',l:'Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°',d:'ltr'},{c:'cs',f:'ğŸ‡¨ğŸ‡¿',l:'ÄŒeÅ¡tina',d:'ltr'},{c:'ro',f:'ğŸ‡·ğŸ‡´',l:'RomÃ¢nÄƒ',d:'ltr'},{c:'el',f:'ğŸ‡¬ğŸ‡·',l:'Î•Î»Î»Î·Î½Î¹ÎºÎ¬',d:'ltr'},{c:'sv',f:'ğŸ‡¸ğŸ‡ª',l:'Svenska',d:'ltr'},{c:'da',f:'ğŸ‡©ğŸ‡°',l:'Dansk',d:'ltr'},{c:'fi',f:'ğŸ‡«ğŸ‡®',l:'Suomi',d:'ltr'},{c:'ms',f:'ğŸ‡²ğŸ‡¾',l:'Bahasa Melayu',d:'ltr'},{c:'fa',f:'ğŸ‡®ğŸ‡·',l:'ÙØ§Ø±Ø³ÛŒ',d:'rtl'},{c:'he',f:'ğŸ‡®ğŸ‡±',l:'×¢×‘×¨×™×ª',d:'rtl'},{c:'bn',f:'ğŸ‡§ğŸ‡©',l:'à¦¬à¦¾à¦‚à¦²à¦¾',d:'ltr'},{c:'sw',f:'ğŸ‡°ğŸ‡ª',l:'Kiswahili',d:'ltr'}];
const T={
ar:{siteTitle:'ÙƒØ±ÙŠØ¨ØªÙˆ Ù‡Ø¨',exchanges:'Ø§Ù„Ù…Ù†ØµØ§Øª',recommendedExchanges:'Ù…Ù†ØµØ§Øª Ø§Ù„ØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§',live:'Ù…Ø¨Ø§Ø´Ø±',fearGreedTitle:'Ù…Ø¤Ø´Ø± Ø§Ù„Ø®ÙˆÙ ÙˆØ§Ù„Ø·Ù…Ø¹',fearGreedSub:'Ù…Ø¤Ø´Ø± Ù…Ø¹Ù†ÙˆÙŠØ§Øª Ø§Ù„Ø³ÙˆÙ‚',outOf100:'Ù…Ù† 100',extremeFear:'Ø®ÙˆÙ Ø´Ø¯ÙŠØ¯',fear:'Ø®ÙˆÙ',neutral:'Ù…Ø­Ø§ÙŠØ¯',greed:'Ø·Ù…Ø¹',extremeGreed:'Ø·Ù…Ø¹ Ø´Ø¯ÙŠØ¯',aiTitle:'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',aiSub:'ØªÙ†Ø¨Ø¤Ø§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',analyzing:'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...',bullishSignals:'ØµØ¹ÙˆØ¯',bearishSignals:'Ù‡Ø¨ÙˆØ·',bollingerBands:'Ø¨ÙˆÙ„ÙŠÙ†Ø¬Ø±',loading:'...',searchCoin:'Ø§Ù„Ø¨Ø­Ø«',sortBy:'Ø§Ù„ØªØ±ØªÙŠØ¨',network:'Ø§Ù„Ø´Ø¨ÙƒØ©',show:'Ø§Ù„Ø¹Ø±Ø¶',loadMore:'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯',loadingData:'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',filteredBy:'ØªØµÙÙŠØ©:',colName:'Ø§Ù„Ø§Ø³Ù…',colPrice:'Ø§Ù„Ø³Ø¹Ø±',colMarketCap:'Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©',colVolume:'Ø§Ù„Ø­Ø¬Ù… 24Ø³',colExchanges:'Ø§Ù„Ù…Ù†ØµØ§Øª',prev:'Ø§Ù„Ø³Ø§Ø¨Ù‚',next:'Ø§Ù„ØªØ§Ù„ÙŠ',showing:'Ø¹Ø±Ø¶',of:'Ù…Ù†',coins:'Ø¹Ù…Ù„Ø©',availableOn:'Ù…ØªÙˆÙØ± Ø¹Ù„Ù‰',exchange:'Ù…Ù†ØµØ©',referralNote:'ğŸ Ø±ÙˆØ§Ø¨Ø· Ø¥Ø­Ø§Ù„Ø© Ø®Ø§ØµØ©',register:'Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†',visit:'Ø²ÙŠØ§Ø±Ø©',trustHigh:'Ø«Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©',trustMedium:'Ø«Ù‚Ø© Ù…ØªÙˆØ³Ø·Ø©',trustLow:'Ø«Ù‚Ø© Ù…Ù†Ø®ÙØ¶Ø©',volume:'Ø§Ù„Ø­Ø¬Ù…',allNetworks:'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø¨ÙƒØ§Øª',rank:'Ø§Ù„ØªØ±ØªÙŠØ¨',marketCap:'Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©',price:'Ø§Ù„Ø³Ø¹Ø±',change24h:'ØªØºÙŠØ± 24Ø³',noExchanges:'Ù„Ø§ ØªÙˆØ¬Ø¯',errorLoading:'Ø®Ø·Ø£',retry:'Ø¥Ø¹Ø§Ø¯Ø©',allLoaded:'ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„',loadMoreRemaining:'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯',oversold:'ØªØ´Ø¨Ø¹ Ø¨ÙŠØ¹ÙŠ',overbought:'ØªØ´Ø¨Ø¹ Ø´Ø±Ø§Ø¦ÙŠ',bullish:'ØµØ§Ø¹Ø¯',bearish:'Ù‡Ø§Ø¨Ø·',nearBottom:'Ù‚Ø±Ø¨ Ø§Ù„Ø£Ø³ÙÙ„',nearTop:'Ù‚Ø±Ø¨ Ø§Ù„Ø£Ø¹Ù„Ù‰',goldenCross:'ØªÙ‚Ø§Ø·Ø¹ Ø°Ù‡Ø¨ÙŠ',deathCross:'ØªÙ‚Ø§Ø·Ø¹ Ù…ÙˆØª',strongBuy:'Ø´Ø±Ø§Ø¡ Ù‚ÙˆÙŠ',buy:'Ø´Ø±Ø§Ø¡',sell:'Ø¨ÙŠØ¹',strongSell:'Ø¨ÙŠØ¹ Ù‚ÙˆÙŠ',coinsFound:'Ø¹Ù…Ù„Ø©',trendingTitle:'Ø§Ù„Ø£ÙƒØ«Ø± Ø±ÙˆØ§Ø¬Ø§Ù‹',trendingSub:'Ø£ÙƒØ«Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø¨Ø­Ø«Ø§Ù‹ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©',altcoinIndex:'Ù…Ø¤Ø´Ø± Ù…ÙˆØ³Ù… Ø§Ù„Ø£Ù„ØªÙƒÙˆÙŠÙ†',altcoinSeason:'Ù…ÙˆØ³Ù… Ø£Ù„ØªÙƒÙˆÙŠÙ†',btcDominance:'Ù‡ÙŠÙ…Ù†Ø© BTC',ethDominance:'Ù‡ÙŠÙ…Ù†Ø© ETH',totalMarketCap:'Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ÙƒÙ„ÙŠØ©',totalVolume24:'Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙƒÙ„ÙŠ 24Ø³',fgHistory:'Ø§Ù„ØªØ§Ø±ÙŠØ®',now:'Ø§Ù„Ø¢Ù†',yesterday:'Ø£Ù…Ø³',lastWeek:'Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',lastMonth:'Ø§Ù„Ø´Ù‡Ø±',entryExitTitle:'Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ - Bitcoin',entryZone:'Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„',exitZone:'Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø±ÙˆØ¬',currentPrice:'Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ',stopLoss:'ÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø©',takeProfit:'Ø¬Ù†ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­',riskReward:'Ù…Ø®Ø§Ø·Ø±Ø©/Ù…ÙƒØ§ÙØ£Ø©',trendStrength:'Ù‚ÙˆØ© Ø§Ù„Ø§ØªØ¬Ø§Ù‡',entryNote:'Ø¹Ù†Ø¯ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¯Ø¹Ù…',exitNote:'Ø¹Ù†Ø¯ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø©',volAnalysis:'Ø­Ø¬Ù… Ø§Ù„ØªØ¯Ø§ÙˆÙ„',supportResistance:'Ø¯Ø¹Ù…/Ù…Ù‚Ø§ÙˆÙ…Ø©',aiRecommendation:'Ø§Ù„ØªÙˆØµÙŠØ©',strongTrend:'Ø§ØªØ¬Ø§Ù‡ Ù‚ÙˆÙŠ',weakTrend:'Ø§ØªØ¬Ø§Ù‡ Ø¶Ø¹ÙŠÙ',highVol:'Ø­Ø¬Ù… Ø¹Ø§Ù„ÙŠ',lowVol:'Ø­Ø¬Ù… Ù…Ù†Ø®ÙØ¶',aboveAvg:'ÙÙˆÙ‚ Ø§Ù„Ù…ØªÙˆØ³Ø·',belowAvg:'ØªØ­Øª Ø§Ù„Ù…ØªÙˆØ³Ø·',footerDesc:'Ù…Ù†ØµØªÙƒ Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„ØªØªØ¨Ø¹ Ø£ÙƒØ«Ø± Ù…Ù† 5000 Ø¹Ù…Ù„Ø© Ø±Ù‚Ù…ÙŠØ© Ù…Ø¹ Ø£Ø¯ÙˆØ§Øª ØªØ­Ù„ÙŠÙ„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù…Ø©.',quickLinks:'Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©',home:'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',topExchanges:'Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØµØ§Øª',disclaimer:'Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©',disclaimerText:'Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø· ÙˆÙ„ÙŠØ³Øª Ù†ØµÙŠØ­Ø© Ù…Ø§Ù„ÙŠØ©.',allRights:'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©',btcSeason:'Ù…ÙˆØ³Ù… Ø¨ÙŠØªÙƒÙˆÙŠÙ†',holdEntry:'Ø§Ù†ØªØ¸Ø± Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙØ¶Ù„',goodEntry:'ÙØ±ØµØ© Ø¯Ø®ÙˆÙ„ Ø¬ÙŠØ¯Ø©',riskHigh:'Ù…Ø®Ø§Ø·Ø±Ø© Ø¹Ø§Ù„ÙŠØ©'},
en:{siteTitle:'CryptoHub',exchanges:'Exchanges',recommendedExchanges:'Recommended Exchanges',live:'Live',fearGreedTitle:'Fear & Greed Index',fearGreedSub:'Market Sentiment',outOf100:'out of 100',extremeFear:'Extreme Fear',fear:'Fear',neutral:'Neutral',greed:'Greed',extremeGreed:'Extreme Greed',aiTitle:'AI Analysis',aiSub:'AI-powered predictions',analyzing:'Analyzing...',bullishSignals:'Bullish',bearishSignals:'Bearish',bollingerBands:'Bollinger',loading:'...',searchCoin:'Search',sortBy:'Sort',network:'Network',show:'Show',loadMore:'Load More',loadingData:'Loading...',filteredBy:'Filter:',colName:'Name',colPrice:'Price',colMarketCap:'Market Cap',colVolume:'Vol 24h',colExchanges:'Exchanges',prev:'Prev',next:'Next',showing:'Showing',of:'of',coins:'coins',availableOn:'Available on',exchange:'exchanges',referralNote:'ğŸ buttons are referral links',register:'Register',visit:'Visit',trustHigh:'High Trust',trustMedium:'Med Trust',trustLow:'Low Trust',volume:'Volume',allNetworks:'All Networks',rank:'Rank',marketCap:'Market Cap',price:'Price',change24h:'24h Change',noExchanges:'None found',errorLoading:'Error',retry:'Retry',allLoaded:'All loaded',loadMoreRemaining:'Load More',oversold:'Oversold',overbought:'Overbought',bullish:'Bullish',bearish:'Bearish',nearBottom:'Near Bottom',nearTop:'Near Top',goldenCross:'Golden Cross',deathCross:'Death Cross',strongBuy:'Strong Buy',buy:'Buy',sell:'Sell',strongSell:'Strong Sell',coinsFound:'found',trendingTitle:'Trending',trendingSub:'Most searched in 24h',altcoinIndex:'Altcoin Season Index',altcoinSeason:'Altcoin Season',btcDominance:'BTC Dominance',ethDominance:'ETH Dominance',totalMarketCap:'Total Market Cap',totalVolume24:'Total Vol 24h',fgHistory:'History',now:'Now',yesterday:'Yesterday',lastWeek:'Week',lastMonth:'Month',entryExitTitle:'Entry & Exit Signals - Bitcoin',entryZone:'Entry Zone',exitZone:'Exit Zone',currentPrice:'Current Price',stopLoss:'Stop Loss',takeProfit:'Take Profit',riskReward:'Risk/Reward',trendStrength:'Trend Strength',entryNote:'At support',exitNote:'At resistance',volAnalysis:'Volume Analysis',supportResistance:'S/R Levels',aiRecommendation:'Recommendation',strongTrend:'Strong Trend',weakTrend:'Weak Trend',highVol:'High Volume',lowVol:'Low Volume',aboveAvg:'Above Average',belowAvg:'Below Average',footerDesc:'Your platform for tracking 5000+ cryptocurrencies with advanced AI tools.',quickLinks:'Quick Links',home:'Home',topExchanges:'Top Exchanges',disclaimer:'Disclaimer',disclaimerText:'For educational purposes only. Crypto trading involves high risk.',allRights:'All rights reserved',btcSeason:'Bitcoin Season',holdEntry:'Wait for better entry',goodEntry:'Good entry opportunity',riskHigh:'High Risk'}
};
const fb=T.en;LANGS.forEach(l=>{if(!T[l.c])T[l.c]={...fb}});

const NETS=[{id:'ethereum',n:'Ethereum (ERC-20)',i:'âŸ '},{id:'binance-smart-chain',n:'BNB Chain (BEP-20)',i:'ğŸ”¶'},{id:'solana',n:'Solana (SPL)',i:'â—'},{id:'polygon-pos',n:'Polygon',i:'â¬¡'},{id:'arbitrum-one',n:'Arbitrum',i:'ğŸ”µ'},{id:'optimistic-ethereum',n:'Optimism',i:'ğŸ”´'},{id:'avalanche',n:'Avalanche',i:'ğŸ”º'},{id:'fantom',n:'Fantom',i:'ğŸ‘»'},{id:'cronos',n:'Cronos',i:'ğŸ”·'},{id:'base',n:'Base',i:'ğŸ”µ'},{id:'tron',n:'TRON (TRC-20)',i:'âš¡'},{id:'bitcoin',n:'Bitcoin',i:'â‚¿'},{id:'cardano',n:'Cardano',i:'ğŸ”µ'},{id:'polkadot',n:'Polkadot',i:'âš«'},{id:'cosmos',n:'Cosmos',i:'âš›ï¸'},{id:'near-protocol',n:'NEAR',i:'ğŸŸ¢'},{id:'algorand',n:'Algorand',i:'â¬¢'},{id:'stellar',n:'Stellar',i:'âœ¦'},{id:'celo',n:'Celo',i:'ğŸŸ¡'},{id:'moonbeam',n:'Moonbeam',i:'ğŸŒ™'},{id:'kava',n:'Kava',i:'ğŸŸ '},{id:'osmosis',n:'Osmosis',i:'ğŸ§ª'},{id:'sui',n:'Sui',i:'ğŸ’§'},{id:'aptos',n:'Aptos',i:'ğŸ…°ï¸'},{id:'mantle',n:'Mantle',i:'ğŸŸ©'},{id:'linea',n:'Linea',i:'ğŸ”µ'},{id:'scroll',n:'Scroll',i:'ğŸ“œ'},{id:'zksync',n:'zkSync',i:'ğŸ”'},{id:'manta-pacific',n:'Manta',i:'ğŸ‹'},{id:'blast',n:'Blast',i:'ğŸ’¥'}];

let cLang='ar',allC=[],filtC=[],cPage=1,iPP=100,cSort='rank',cNet='all',bWs=null,uInt=null,isL=false,cBatch=0,maxB=20,pCache={};
function t(k){return(T[cLang]&&T[cLang][k])||T.en[k]||k}
function applyLang(){const l=LANGS.find(x=>x.c===cLang);if(!l)return;document.documentElement.lang=l.c;document.documentElement.dir=l.d;document.getElementById('cFlag').textContent=l.f;document.getElementById('cCode').textContent=l.c.toUpperCase();document.title=t('siteTitle')+' - 5000+ Crypto';document.querySelectorAll('[data-i18n]').forEach(el=>{const v=t(el.getAttribute('data-i18n'));if(v)el.textContent=v});document.querySelectorAll('[data-i18n-opt]').forEach(el=>{const v=t(el.getAttribute('data-i18n-opt'));if(v)el.textContent=v});const es=document.getElementById('exSrch');if(es)es.placeholder=t('searchCoin');document.querySelectorAll('#lMenu .ddi').forEach(i=>i.classList.toggle('active',i.dataset.lang===cLang));if(allC.length){updFG();render()}}
function setLang(c){cLang=c;localStorage.setItem('lang',c);closeDD();applyLang()}
function buildLM(){document.getElementById('lMenu').innerHTML=LANGS.map(l=>`<div class="ddi ${l.c===cLang?'active':''}" data-lang="${l.c}" onclick="setLang('${l.c}')"><span class="flag">${l.f}</span><span>${l.l}</span><i class="fas fa-check ck"></i></div>`).join('')}
function buildNS(){document.getElementById('netSel').innerHTML=`<option value="all">${t('allNetworks')}</option>`+NETS.map(n=>`<option value="${n.id}">${n.i} ${n.n}</option>`).join('')}
function toggleDD(id){const m=document.getElementById(id).querySelector('.ddm');const w=m.classList.contains('active');closeDD();if(!w)m.classList.add('active')}
function closeDD(){document.querySelectorAll('.ddm').forEach(m=>m.classList.remove('active'))}
document.addEventListener('click',e=>{if(!e.target.closest('.dropdown'))closeDD()});document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeDD();closeMod()}});
function toggleTheme(){const d=document.documentElement.classList.toggle('dark');document.getElementById('sI').classList.toggle('hidden',d);document.getElementById('mI').classList.toggle('hidden',!d);localStorage.setItem('theme',d?'dark':'light')}
if(localStorage.getItem('theme')==='dark'){document.documentElement.classList.add('dark');document.getElementById('sI').classList.add('hidden');document.getElementById('mI').classList.remove('hidden')}

// Trending
async function loadTrend(){try{const r=await fetch('https://api.coingecko.com/api/v3/search/trending');const d=await r.json();const coins=d.coins||[];document.getElementById('tList').innerHTML=coins.slice(0,10).map((c,i)=>{const cn=c.item;const chg=cn.data?.price_change_percentage_24h?.usd;const cc=chg>=0?'var(--gn)':'var(--rd)';const cs=chg?`${chg>=0?'+':''}${chg.toFixed(1)}%`:'--';const pr=cn.data?.price?'$'+parseFloat(cn.data.price).toLocaleString('en-US',{maximumFractionDigits:6}):'--';const rc=['#FFD700','#C0C0C0','#CD7F32'];const bg=i<3?rc[i]:'var(--bg3)';const tc=i<3?'#000':'var(--t1)';return`<div class="tcard" onclick="showEx('${cn.id}','${cn.name.replace(/'/g,"\\'")}','${cn.symbol.toUpperCase()}','${cn.thumb}')"><div class="flex items-center gap-2 mb-2"><div class="trank" style="background:${bg};color:${tc}">${i+1}</div><img src="${cn.thumb}" class="w-6 h-6 rounded-full"><div><div class="font-bold text-sm">${cn.symbol.toUpperCase()}</div><div class="text-xs" style="color:var(--t2)">${cn.name}</div></div></div><div class="flex justify-between items-end"><div class="text-sm font-bold">${pr}</div><div class="text-xs font-bold" style="color:${cc}">${cs}</div></div><div class="mt-1 text-xs" style="color:var(--t2)"><i class="fas fa-chart-line" style="font-size:9px"></i> #${cn.market_cap_rank||'--'}</div></div>`}).join('')}catch(e){}}

// Fear & Greed Enhanced
let fgD=null;
async function loadFG(){try{const r=await fetch('https://api.alternative.me/fng/?limit=31');const d=await r.json();const e=d.data;fgD={n:+e[0].value,y:+e[1].value,w:+(e[6]||e[0]).value,m:+(e[29]||e[0]).value};updFG()}catch(e){}}
function fgC(v){return v<20?'#ef4444':v<40?'#f97316':v<60?'#eab308':v<80?'#84cc16':'#22c55e'}
function updFG(){if(!fgD)return;const v=fgD.n;document.getElementById('fgV').textContent=v;const ls=[t('extremeFear'),t('fear'),t('neutral'),t('greed'),t('extremeGreed')];const cs=['ef','f','ne','gr','eg'];const i=v<20?0:v<40?1:v<60?2:v<80?3:4;document.getElementById('fgL').textContent=ls[i];document.getElementById('fgL').style.color=fgC(v);document.getElementById('gIn').className='gauge-in '+cs[i];document.getElementById('gNd').style.transform=`translateX(-50%) rotate(${(v/100)*180}deg)`;
[{a:'fN',b:'fNv',v:fgD.n},{a:'fY',b:'fYv',v:fgD.y},{a:'fW',b:'fWv',v:fgD.w},{a:'fM',b:'fMv',v:fgD.m}].forEach(x=>{document.getElementById(x.a).style.width=x.v+'%';document.getElementById(x.a).style.background=fgC(x.v);document.getElementById(x.b).textContent=x.v;document.getElementById(x.b).style.color=fgC(x.v)})}

// Global + Altcoin Index
async function loadGlobal(){try{const r=await fetch('https://api.coingecko.com/api/v3/global');const d=await r.json();const g=d.data;const bd=g.market_cap_percentage?.btc||0,ed=g.market_cap_percentage?.eth||0;document.getElementById('btcD').textContent=bd.toFixed(1)+'%';document.getElementById('ethD').textContent=ed.toFixed(1)+'%';document.getElementById('tMcap').textContent=fN(g.total_market_cap?.usd||0);document.getElementById('tVol').textContent=fN(g.total_volume?.usd||0);const ai=Math.round(Math.max(0,Math.min(100,(100-bd)*1.5)));document.getElementById('altV').textContent=ai;document.getElementById('altP').style.left=ai+'%';document.getElementById('altL').textContent=ai>75?t('altcoinSeason'):ai<25?t('btcSeason'):t('neutral');document.getElementById('altL').style.color=ai>75?'var(--gn)':ai<25?'var(--ac)':'var(--t2)'}catch(e){}}

// AI Analysis (8 indicators + entry/exit)
function cRSI(p,n=14){if(p.length<n)return null;let g=0,l=0;for(let i=1;i<=n;i++){const d=p[i]-p[i-1];d>0?g+=d:l+=Math.abs(d)}const ag=g/n,al=l/n;return al===0?100:100-(100/(1+(ag/al)))}
function cEMA(p,n){if(!p.length)return 0;const k=2/(n+1);let e=p[0];for(let i=1;i<p.length;i++)e=(p[i]*k)+(e*(1-k));return e}
function cStoch(p,n=14){const r=p.slice(-n);const lo=Math.min(...r),hi=Math.max(...r),c=r[r.length-1];return hi===lo?50:((c-lo)/(hi-lo))*100}
async function calcAI(){try{
const r=await fetch('https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=30&interval=daily');const d=await r.json();const P=d.prices.map(p=>p[1]),V=d.total_volumes.map(v=>v[1]),cur=P[P.length-1];let bu=0,be=0;
const rsi=cRSI(P);if(rsi!==null){$('rV').textContent=rsi.toFixed(1);if(rsi<30){sig('r','b',t('oversold'));bu++;sct('rC','buy')}else if(rsi>70){sig('r','s',t('overbought'));be++;sct('rC','sell')}else{sig('r','n',t('neutral'));sct('rC','hold')}}
const macd=cEMA(P,12)-cEMA(P,26);$('mV').textContent=macd.toFixed(0);if(macd>0){sig('m','b',t('bullish'));bu++;sct('mC','buy')}else{sig('m','s',t('bearish'));be++;sct('mC','sell')}
const rp=P.slice(-20),sma=rp.reduce((a,b)=>a+b,0)/20,std=Math.sqrt(rp.reduce((s,p)=>s+Math.pow(p-sma,2),0)/20),pos=((cur-(sma-std*2))/((sma+std*2)-(sma-std*2)))*100;$('bV').textContent=pos.toFixed(0)+'%';if(pos<20){sig('b','b',t('nearBottom'));bu++;sct('bC','buy')}else if(pos>80){sig('b','s',t('nearTop'));be++;sct('bC','sell')}else{sig('b','n',t('neutral'));sct('bC','hold')}
const e20=cEMA(P.slice(-20),20),e50=cEMA(P.slice(-50),50);$('eV').textContent='$'+e20.toFixed(0);if(e20>e50){sig('e','b',t('goldenCross'));bu++;sct('eC','buy')}else{sig('e','s',t('deathCross'));be++;sct('eC','sell')}
const st=cStoch(P);$('stV').textContent=st.toFixed(1);if(st<20){sig('st','b',t('oversold'));bu++;sct('stC','buy')}else if(st>80){sig('st','s',t('overbought'));be++;sct('stC','sell')}else{sig('st','n',t('neutral'));sct('stC','hold')}
const chgs=[];for(let i=1;i<P.length;i++)chgs.push(Math.abs(P[i]-P[i-1])/P[i-1]*100);const adx=chgs.slice(-14).reduce((a,b)=>a+b,0)/14*10;$('adV').textContent=adx.toFixed(1);if(adx>25){sig('ad','b',t('strongTrend'));bu++;sct('adC','buy')}else{sig('ad','n',t('weakTrend'));sct('adC','hold')}
const aV=V.slice(-14).reduce((a,b)=>a+b,0)/14,cV=V[V.length-1],vr=(cV/aV*100).toFixed(0);$('vlV').textContent=vr+'%';if(cV>aV*1.2){sig('vl','b',t('highVol'));bu++;sct('vlC','buy')}else if(cV<aV*.8){sig('vl','s',t('lowVol'));be++;sct('vlC','sell')}else{sig('vl','n',t('neutral'));sct('vlC','hold')}
const lo14=Math.min(...P.slice(-14)),hi14=Math.max(...P.slice(-14));$('srV').textContent=`S:$${fS(lo14)} R:$${fS(hi14)}`;if(((cur-lo14)/cur*100)<2){sig('sr','b',t('nearBottom'));bu++;sct('srC','buy')}else if(((hi14-cur)/cur*100)<2){sig('sr','s',t('nearTop'));be++;sct('srC','sell')}else{sig('sr','n',t('neutral'));sct('srC','hold')}
const tot=bu+be,sc=tot>0?Math.round((bu/tot)*100):50;$('aiS').textContent=sc;$('buC').textContent=bu;$('beC').textContent=be;
const s=$('aiSig');if(sc>=70){s.style.background='rgba(22,199,132,.3)';s.innerHTML='<i class="fas fa-arrow-up"></i> '+t('strongBuy')}else if(sc>=55){s.style.background='rgba(132,204,22,.3)';s.innerHTML='<i class="fas fa-arrow-up"></i> '+t('buy')}else if(sc>=45){s.style.background='rgba(156,163,175,.3)';s.innerHTML='<i class="fas fa-minus"></i> '+t('neutral')}else if(sc>=30){s.style.background='rgba(251,146,60,.3)';s.innerHTML='<i class="fas fa-arrow-down"></i> '+t('sell')}else{s.style.background='rgba(234,57,67,.3)';s.innerHTML='<i class="fas fa-arrow-down"></i> '+t('strongSell')}
$('aiRec').innerHTML=sc>=60?`âœ… ${t('goodEntry')} â€” ${bu}/${tot}`:sc<=40?`âš ï¸ ${t('riskHigh')} â€” ${be}/${tot}`:`â¸ï¸ ${t('holdEntry')}`;
$('crP').textContent='$'+cur.toLocaleString('en-US',{maximumFractionDigits:0});$('enP').textContent='$'+lo14.toLocaleString('en-US',{maximumFractionDigits:0});$('exP').textContent='$'+hi14.toLocaleString('en-US',{maximumFractionDigits:0});
const sl=lo14*.97,tp=hi14*1.03;$('sL').textContent='$'+sl.toLocaleString('en-US',{maximumFractionDigits:0});$('tP').textContent='$'+tp.toLocaleString('en-US',{maximumFractionDigits:0});
const rk=cur-sl,rw=tp-cur;$('rR').textContent=rw>0?'1:'+(rw/rk).toFixed(1):'--';$('tS').textContent=adx>25?t('strongTrend'):t('weakTrend');$('tS').style.color=adx>25?'var(--gn)':'var(--rd)';$('pAct').textContent=cur>e20?`â†‘ ${t('aboveAvg')}`:`â†“ ${t('belowAvg')}`;$('pAct').style.color=cur>e20?'var(--gn)':'var(--rd)';
}catch(e){console.error('AI err:',e)}}
function $(id){return document.getElementById(id)}
function sig(id,tp,lb){const el=$(id+'S');const ic=tp==='b'?'fa-arrow-up':tp==='s'?'fa-arrow-down':'fa-minus';const cl=tp==='b'?'sbb':tp==='s'?'sbs':'sbn';el.className='sb '+cl;el.innerHTML=`<i class="fas ${ic}"></i> ${lb}`}
function sct(id,tp){const c=$(id);c.classList.remove('buy','sell','hold');c.classList.add(tp)}
function fS(n){return n>=1000?(n/1000).toFixed(1)+'K':n.toFixed(0)}

// Coins
async function loadCoins(){if(isL)return;isL=true;try{$('lProg').classList.remove('hidden');for(let p=1;p<=2;p++){$('pFill').style.width=(p/2*100)+'%';$('pTxt').textContent=t('loadingData')+` (${allC.length})`;const res=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=${p}&sparkline=false&price_change_percentage=1h,24h,7d`);if(!res.ok)throw 0;const data=await res.json();data.forEach((c,i)=>{if(!c.total_volume||c.total_volume<=0)return;allC.push({id:c.id,rk:((p-1)*250)+i+1,nm:c.name,sy:c.symbol.toUpperCase(),pr:c.current_price||0,c1:c.price_change_percentage_1h_in_currency||0,c24:c.price_change_percentage_24h_in_currency||c.price_change_percentage_24h||0,c7:c.price_change_percentage_7d_in_currency||0,mc:c.market_cap||0,vol:c.total_volume||0,img:c.image||'',ex:Math.floor(Math.random()*50)+10,pl:{}})});await new Promise(r=>setTimeout(r,1200))}cBatch=2;filtC=[...allC];render();$('lProg').classList.add('hidden');initWS();loadPlat()}catch(e){$('tBody').innerHTML=`<tr><td colspan="9" class="p-8 text-center text-red-500">${t('errorLoading')}<br><button onclick="location.reload()" class="mt-2 px-3 py-1.5 rounded-lg text-white text-xs" style="background:var(--ac)">${t('retry')}</button></td></tr>`}isL=false}
async function loadPlat(){try{const r=await fetch('https://api.coingecko.com/api/v3/coins/list?include_platform=true');if(!r.ok)return;const d=await r.json();d.forEach(c=>{if(c.platforms&&Object.keys(c.platforms).length)pCache[c.id]=c.platforms});allC.forEach(c=>{if(pCache[c.id])c.pl=pCache[c.id]})}catch(e){}}
function chkNet(c,nid){if(!c.pl||!Object.keys(c.pl).length){const nm={'ethereum':['ethereum'],'binance-smart-chain':['binancecoin'],'solana':['solana'],'polygon-pos':['matic-network'],'arbitrum-one':['arbitrum'],'avalanche':['avalanche-2'],'tron':['tron'],'bitcoin':['bitcoin'],'cardano':['cardano'],'polkadot':['polkadot'],'cosmos':['cosmos'],'sui':['sui'],'aptos':['aptos']};return(nm[nid]||[]).includes(c.id)}return Object.keys(c.pl).some(p=>{const pl=p.toLowerCase().replace(/\s+/g,'-'),nl=nid.toLowerCase();return pl.includes(nl)||nl.includes(pl)||(nl==='binance-smart-chain'&&pl.includes('binance'))||(nl==='arbitrum-one'&&pl.includes('arbitrum'))||(nl==='optimistic-ethereum'&&pl.includes('optimis'))||(nl==='polygon-pos'&&pl.includes('polygon'))})}
async function loadMore(){if(isL||cBatch>=maxB)return;isL=true;const btn=$('lmBtn');btn.disabled=true;btn.innerHTML='<i class="fas fa-spinner fa-spin"></i> '+t('loading');$('lProg').classList.remove('hidden');try{const nx=cBatch+1;const res=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=${nx}&sparkline=false&price_change_percentage=1h,24h,7d`);if(!res.ok)throw 0;const data=await res.json();data.forEach((c,i)=>{if(!c.total_volume||c.total_volume<=0)return;allC.push({id:c.id,rk:((nx-1)*250)+i+1,nm:c.name,sy:c.symbol.toUpperCase(),pr:c.current_price||0,c1:c.price_change_percentage_1h_in_currency||0,c24:c.price_change_percentage_24h_in_currency||c.price_change_percentage_24h||0,c7:c.price_change_percentage_7d_in_currency||0,mc:c.market_cap||0,vol:c.total_volume||0,img:c.image||'',ex:Math.floor(Math.random()*50)+10,pl:pCache[c.id]||{}})});$('pFill').style.width='100%';cBatch=nx;doFilter();btn.disabled=false;btn.innerHTML=cBatch>=maxB?'<i class="fas fa-check-circle"></i> '+t('allLoaded'):'<i class="fas fa-plus-circle"></i> '+t('loadMoreRemaining')+` (${(maxB-cBatch)*250})`}catch(e){btn.disabled=false;btn.innerHTML='<i class="fas fa-exclamation-circle"></i> '+t('errorLoading')}setTimeout(()=>$('lProg').classList.add('hidden'),800);isL=false}
function initWS(){const sy=allC.slice(0,50).map(c=>{const s=c.sy.toLowerCase();return['usdt','usdc','busd','dai','tusd','fdusd'].includes(s)?null:`${s}usdt@ticker`}).filter(Boolean);if(!sy.length)return;bWs=new WebSocket(`wss://stream.binance.com:9443/stream?streams=${sy.join('/')}`);bWs.onmessage=e=>{const d=JSON.parse(e.data);if(d.data){const s=d.data.s.replace('USDT',''),x=allC.findIndex(c=>c.sy===s);if(x!==-1){allC[x].pr=parseFloat(d.data.c);allC[x].c24=parseFloat(d.data.P)}}};bWs.onerror=()=>{};uInt=setInterval(()=>{if(cPage===1)render()},5000)}

// Exchanges Modal
function getRef(nm,url){if(!nm)return url;const n=nm.toLowerCase();const refs={binance:'https://accounts.binance.info/register?ref=OWIOMYX9',bingx:'https://bingx.com/invite/MTBGIP',mexc:'https://www.mexc.com/register?inviteCode=1FTLJ',bybit:'https://www.bybit.com/invite?ref=EKDMEJ',bitget:'https://partner.bitget.com/bg/NZLRR8'};for(const[k,v]of Object.entries(refs))if(n.includes(k))return v;return url}
async function showEx(cid,cn,cs,cl){$('mName').textContent=cn;$('mSym').textContent=cs;$('mLogo').src=cl;$('exMod').classList.add('active');$('exLst').innerHTML='<div class="text-center py-6"><div class="spinner mx-auto mb-2"></div></div>';try{const r=await fetch(`https://api.coingecko.com/api/v3/coins/${cid}/tickers`);const d=await r.json();const exs=d.tickers.slice(0,50);let rc=0;exs.forEach(ex=>{const u=getRef(ex.market?.name,ex.trade_url);if(u!==ex.trade_url&&u!==null)rc++});$('exCt').innerHTML=exs.length+(rc>0?` <span style="color:var(--gn)">(${rc} <i class="fas fa-gift"></i>)</span>`:'');if(!exs.length){$('exLst').innerHTML=`<div class="text-center py-6">${t('noExchanges')}</div>`;return}$('exLst').innerHTML=exs.map(ex=>{const vol=ex.converted_volume?.usd||0,ts=ex.trust_score||'yellow',tc=ts==='green'?'th':ts==='yellow'?'tm':'tl',tl=ts==='green'?t('trustHigh'):ts==='yellow'?t('trustMedium'):t('trustLow'),url=getRef(ex.market?.name,ex.trade_url),isR=url!==ex.trade_url&&url!==null;return`<div class="ec mb-2"><img src="${ex.market?.logo||''}" class="el" onerror="this.style.display='none'"><div style="flex:1"><div class="font-semibold text-sm">${ex.market?.name||'?'}</div><div class="text-xs" style="color:var(--t2)">${ex.base}/${ex.target}</div><div class="tb ${tc}"><i class="fas fa-shield-alt"></i> ${tl}</div></div><div style="text-align:end"><div class="font-bold text-sm" style="color:var(--ac)">$${ex.last?.toLocaleString()||'N/A'}</div><div style="font-size:10px;color:var(--t2)">${fN(vol)}</div>${url?`<a href="${url}" target="_blank" class="ebtn"><i class="fas fa-external-link-alt"></i>${isR?t('register'):t('visit')}${isR?' <i class="fas fa-gift"></i>':''}</a>`:''}</div></div>`}).join('')}catch(e){$('exLst').innerHTML=`<div class="text-center py-6 text-red-500">${t('errorLoading')}</div>`}}
function closeMod(){$('exMod').classList.remove('active')}
document.addEventListener('click',e=>{if(e.target===$('exMod'))closeMod()});
document.addEventListener('DOMContentLoaded',()=>{$('exSrch')?.addEventListener('input',e=>{const s=e.target.value.toLowerCase();document.querySelectorAll('.ec').forEach(c=>{c.style.display=c.textContent.toLowerCase().includes(s)?'flex':'none'})})});

// Filter/Sort/Render
function doFilter(){const s=$('search').value.toLowerCase();filtC=allC.filter(c=>{const ms=c.nm.toLowerCase().includes(s)||c.sy.toLowerCase().includes(s);const mn=cNet==='all'||chkNet(c,cNet);return ms&&mn});const af=$('aFilt');if(cNet!=='all'){af.classList.remove('hidden');const net=NETS.find(n=>n.id===cNet);$('aNetName').textContent=net?`${net.i} ${net.n}`:cNet;$('fCount').textContent=`(${filtC.length} ${t('coinsFound')})`}else af.classList.add('hidden');doSortArr();cPage=1;render()}
function clearNet(){cNet='all';$('netSel').value='all';doFilter()}
function doSort(c){cSort=c;doSortArr();render()}
function doSortArr(){filtC.sort((a,b)=>{switch(cSort){case'rank':return a.rk-b.rk;case'name':return a.nm.localeCompare(b.nm);case'price':return b.pr-a.pr;case'change_1h':return b.c1-a.c1;case'change_24h':return b.c24-a.c24;case'change_7d':return b.c7-a.c7;case'market_cap':return b.mc-a.mc;case'volume':return b.vol-a.vol;default:return a.rk-b.rk}})}
function fN(n){if(n>=1e12)return'$'+(n/1e12).toFixed(2)+'T';if(n>=1e9)return'$'+(n/1e9).toFixed(2)+'B';if(n>=1e6)return'$'+(n/1e6).toFixed(2)+'M';if(n>=1e3)return'$'+(n/1e3).toFixed(2)+'K';return'$'+n.toFixed(2)}
function render(){const st=(cPage-1)*iPP,en=st+iPP,pg=filtC.slice(st,en);const tb=$('tBody');if(!pg.length)tb.innerHTML=`<tr><td colspan="9" class="p-6 text-center" style="color:var(--t2)">${t('noExchanges')}</td></tr>`;else tb.innerHTML=pg.map(c=>{const s1=c.c1>=0?'color:var(--gn)':'color:var(--rd)',s24=c.c24>=0?'color:var(--gn)':'color:var(--rd)',s7=c.c7>=0?'color:var(--gn)':'color:var(--rd)';return`<tr onclick="showEx('${c.id}','${c.nm.replace(/'/g,"\\'")}','${c.sy}','${c.img}')"><td style="color:var(--t2);font-size:12px">${c.rk}</td><td><div class="flex items-center gap-2" style="justify-content:start"><img src="${c.img}" class="w-5 h-5 rounded-full" onerror="this.style.display='none'" loading="lazy"><span class="font-semibold text-sm">${c.nm}</span><span style="font-size:11px;color:var(--t2)">${c.sy}</span></div></td><td class="font-semibold">$${c.pr>=1?c.pr.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2}):c.pr.toFixed(8)}</td><td style="${s1};font-weight:600">${c.c1>=0?'+':''}${c.c1.toFixed(2)}%</td><td style="${s24};font-weight:600">${c.c24>=0?'+':''}${c.c24.toFixed(2)}%</td><td class="hidden md:table-cell" style="${s7};font-weight:600">${c.c7>=0?'+':''}${c.c7.toFixed(2)}%</td><td class="hidden lg:table-cell" style="color:var(--t2);font-size:12px">${fN(c.mc)}</td><td class="hidden lg:table-cell" style="color:var(--t2);font-size:12px">${fN(c.vol)}</td><td class="hidden xl:table-cell"><div class="ib"><i class="fas fa-exchange-alt"></i> ${c.ex}</div></td></tr>`}).join('');
rPages();$('sRange').textContent=`${st+1}-${Math.min(en,filtC.length)}`;$('tCoins').textContent=filtC.length.toLocaleString()}
function rPages(){const tot=Math.ceil(filtC.length/iPP),p=$('pgs');let h='';const s=Math.max(1,cPage-2),e=Math.min(tot,cPage+2);for(let i=s;i<=e;i++)h+=`<button onclick="gTo(${i})" class="px-2.5 py-1 rounded-lg text-xs font-medium" style="background:${i===cPage?'var(--ac)':'var(--bg2)'};color:${i===cPage?'#fff':'var(--t1)'}">${i}</button>`;p.innerHTML=h}
function gNext(){if(cPage<Math.ceil(filtC.length/iPP)){cPage++;render();scrollTo(0,0)}}
function gPrev(){if(cPage>1){cPage--;render();scrollTo(0,0)}}
function gTo(p){cPage=p;render();scrollTo(0,0)}
function gFirst(){cPage=1;render();scrollTo(0,0)}
function gLast(){cPage=Math.ceil(filtC.length/iPP);render();scrollTo(0,0)}

$('search').addEventListener('input',doFilter);
$('sortSel').addEventListener('change',()=>{cSort=$('sortSel').value;doSortArr();render()});
$('netSel').addEventListener('change',e=>{cNet=e.target.value;doFilter()});
$('ppSel').addEventListener('change',e=>{iPP=parseInt(e.target.value);cPage=1;render()});

window.addEventListener('DOMContentLoaded',()=>{const sl=localStorage.getItem('lang');if(sl&&LANGS.find(l=>l.c===sl))cLang=sl;buildLM();buildNS();applyLang();loadTrend();loadCoins();loadFG();calcAI();loadGlobal();setInterval(loadFG,300000);setInterval(calcAI,300000);setInterval(loadGlobal,300000);setInterval(loadTrend,600000)});
window.addEventListener('beforeunload',()=>{if(bWs)bWs.close();if(uInt)clearInterval(uInt)});
</script>
</body>
</html>
